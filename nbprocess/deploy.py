# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/11_deploy.ipynb.

# %% auto 0
__all__ = ['ghp_deploy']

# %% ../nbs/11_deploy.ipynb 2
from .read import get_config
from fastcore.script import run, call_parse

# %% ../nbs/11_deploy.ipynb 3
def _get_cfg(c): 
    cfg = get_config()
    if c not in cfg: raise ValueError(f'`{c}` not specified in settings.ini')
    return cfg[c]

def _check_ghp():
    try: run('which ghp-import')
    except: print('You must first install ghp-import with `pip install ghp-import` before using `nbprocess_deploy`.')

# %% ../nbs/11_deploy.ipynb 4
@call_parse
def ghp_deploy():
    "Deploy docs in doc_path from settings.ini to GitHub Pages."
    srcdir = _get_cfg('doc_path')
    _check_ghp()
    print(run(f'ghp-import -p {srcdir}', stderr=True))
