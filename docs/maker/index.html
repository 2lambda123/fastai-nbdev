<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-maker">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<title data-rh="true">maker | nbprocess</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nbprocess.fast.ai/maker"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="maker | nbprocess"><meta data-rh="true" name="description" content="- Create one or more modules from selected notebook cells"><meta data-rh="true" property="og:description" content="- Create one or more modules from selected notebook cells"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://nbprocess.fast.ai/maker"><link data-rh="true" rel="alternate" href="https://nbprocess.fast.ai/maker" hreflang="en"><link data-rh="true" rel="alternate" href="https://nbprocess.fast.ai/maker" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.463b2d4a.css">
<link rel="preload" href="/assets/js/runtime~main.c8a224fb.js" as="script">
<link rel="preload" href="/assets/js/main.61181c7e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title">nbprocess</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/fastai/nbprocess" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/read">read</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/maker">maker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/export">export</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sync">sync</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/merge">merge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/clean">clean</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/convert">convert</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/06a_media">06a_media</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/06b_mdx">06b_mdx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">index</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">maker</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>maker</h1></header><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#hide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#default_exp maker</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h1>nbprocess.maker</h1><ul><li>Create one or more modules from selected notebook cells</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from nbprocess.read import *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from nbprocess.imports import *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from fastcore.script import *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from fastcore.imports import *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import ast,contextlib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from collections import defaultdict</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from pprint import pformat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from textwrap import TextWrapper</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">from fastcore.test import *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from pdb import set_trace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from importlib import reload</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="variable-helpers">Variable helpers<a class="hash-link" href="#variable-helpers" title="Direct link to heading">‚Äã</a></h2><p>These functions let us find and modify the definitions of variables in python modules.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def find_var(lines, varname):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Find the line numbers where `varname` is defined in `lines`&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start = first(i for i,o in enumerate(lines) if o.startswith(varname))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if start is None: return None,None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    empty = &#x27; &#x27;,&#x27;\t&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if start==len(lines)-1 or lines[start+1][:1] not in empty: return start,start+1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end = first(i for i,o in enumerate(lines[start+1:]) if o[:1] not in empty)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return start,len(lines) if end is None else (end+start+1)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">t = &#x27;&#x27;&#x27;a_=(1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b_=3&#x27;&#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(find_var(t.splitlines(), &#x27;a_&#x27;), (0,3))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(find_var(t.splitlines(), &#x27;b_&#x27;), (4,5))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def read_var(code, varname):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Eval and return the value of `varname` defined in `code`&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lines = code.splitlines()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start,end = find_var(lines, varname)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if start is None: return None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res = [lines[start].split(&#x27;=&#x27;)[-1].strip()]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res += lines[start+1:end]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try: return eval(&#x27;\n&#x27;.join(res))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except SyntaxError: raise Exception(&#x27;\n&#x27;.join(res)) from None</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(read_var(t, &#x27;a_&#x27;), (1,2,3))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(read_var(t, &#x27;b_&#x27;), 3)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def update_var(varname, func, fn=None, code=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Update the definition of `varname` in file `fn`, by calling `func` with the current definition&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if fn:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fn = Path(fn)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        code = fn.read_text()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lines = code.splitlines()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    v = read_var(code, varname)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res = func(v)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start,end = find_var(lines, varname)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    del(lines[start:end])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lines.insert(start, f&quot;{varname} = {res}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    code = &#x27;\n&#x27;.join(lines)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if fn: fn.write_text(code)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else: return code</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">g = exec_new(t)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq((g[&#x27;a_&#x27;],g[&#x27;b_&#x27;]), ((1,2,3),3))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">t2 = update_var(&#x27;a_&#x27;, lambda o:0, code=t)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exec(t2, g)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq((g[&#x27;a_&#x27;],g[&#x27;b_&#x27;]), (0,3))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">t3 = update_var(&#x27;b_&#x27;, lambda o:0, code=t)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exec(t3, g)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq((g[&#x27;a_&#x27;],g[&#x27;b_&#x27;]), ((1,2,3),0))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="modulemaker--">ModuleMaker -<a class="hash-link" href="#modulemaker--" title="Direct link to heading">‚Äã</a></h2><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ModuleMaker:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Helper class to create exported library from notebook source cells&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self, dest, name, nb_path, is_new=True):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dest,nb_path = Path(dest),Path(nb_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        store_attr()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fname = dest/(name.replace(&#x27;.&#x27;,&#x27;/&#x27;) + &quot;.py&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if is_new: dest.mkdir(parents=True, exist_ok=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else: assert self.fname.exists(), f&quot;{self.fname} does not exist&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.dest2nb = nb_path.relpath(dest)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.hdr = f&quot;# %% {self.dest2nb}&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>In order to export a notebook, we need an way to create a Python file. <code>ModuleMaker</code> fills that role. Pass in the directory where you want to module created, the name of the module, the path of the notebook source, and set <code>is_new</code> to <code>True</code> if this is a new file being created (rather than an existing file being added to). The location of the saved module will be in <code>fname</code>.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mm = ModuleMaker(dest=&#x27;tmp&#x27;, name=&#x27;test.testing&#x27;, nb_path=Path.cwd()/&#x27;01_export.ipynb&#x27;, is_new=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mm.fname</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="wrapper_Kbar"><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Path(&#x27;tmp/test/testing.py&#x27;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div> </div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_def_types = ast.FunctionDef,ast.AsyncFunctionDef,ast.ClassDef</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_assign_types = ast.AnnAssign, ast.Assign, ast.AugAssign</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def _val_or_id(it): return [getattr(o, &#x27;value&#x27;, getattr(o, &#x27;id&#x27;, None)) for o in it.value.elts]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def _all_targets(a): return L(getattr(a,&#x27;elts&#x27;,a))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def _filt_dec(x): return getattr(x,&#x27;id&#x27;,&#x27;&#x27;).startswith(&#x27;patch&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def _wants(o): return isinstance(o,_def_types) and not any(L(o.decorator_list).filter(_filt_dec))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def retr_exports(trees):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # include anything mentioned in &quot;_all_&quot;, even if otherwise private</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # NB: &quot;_all_&quot; can include strings (names), or symbols, so we look for &quot;id&quot; or &quot;value&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assigns = trees.filter(risinstance(_assign_types))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    all_assigns = assigns.filter(lambda o: getattr(o.targets[0],&#x27;id&#x27;,None)==&#x27;_all_&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    all_vals = all_assigns.map(_val_or_id).concat()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    syms = trees.filter(_wants).attrgot(&#x27;name&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # assignment targets (NB: can be multiple, e.g. &quot;a=b=c&quot;, and/or destructuring e.g &quot;a,b=(1,2)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assign_targs = L(L(assn.targets).map(_all_targets).concat() for assn in assigns).concat()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exports = (assign_targs.attrgot(&#x27;id&#x27;)+syms).filter(lambda o: o and o[0]!=&#x27;_&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (exports+all_vals).unique()</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def make_all(self:ModuleMaker, cells):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Create `__all__` with all exports in `cells`&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if cells is None: return &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return retr_exports(cells.map(NbCell.parsed_).concat())</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def make_code_cell(code): return AttrDict(source=code, cell_type=&quot;code&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def make_code_cells(*ss): return dict2nb({&#x27;cells&#x27;:L(ss).map(make_code_cell)}).cells</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>We want to add an <code>__all__</code> to the top of the exported module. This methods autogenerates it from all code in <code>cells</code>.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">nb = make_code_cells(&quot;from __future__ import print_function&quot;, &quot;def a():...&quot;, &quot;def b():...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &quot;c=d=1&quot;, &quot;_f=1&quot;, &quot;_g=1&quot;, &quot;_all_=[&#x27;_g&#x27;]&quot;, &quot;@patch\ndef h(self:ca):...&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(set(mm.make_all(nb)), set([&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;, &#x27;_g&#x27;]))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def relative_import(name, fname, level=0):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Convert a module `name` to a name relative to `fname`&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert not level</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sname = name.replace(&#x27;.&#x27;,&#x27;/&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if not(os.path.commonpath([sname,fname])): return name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rel = os.path.relpath(sname, fname)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if rel==&quot;.&quot;: return &quot;.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res = rel.replace(f&quot;..{os.path.sep}&quot;, &quot;.&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;.&quot; + res.replace(os.path.sep, &quot;.&quot;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(relative_import(&#x27;nbprocess.core&#x27;, &quot;xyz&quot;), &#x27;nbprocess.core&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(relative_import(&#x27;nbprocess.core&#x27;, &#x27;nbprocess&#x27;), &#x27;.core&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_p = Path(&#x27;fastai&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(relative_import(&#x27;fastai.core&#x27;, _p/&#x27;vision&#x27;), &#x27;..core&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(relative_import(&#x27;fastai.core&#x27;, _p/&#x27;vision/transform&#x27;), &#x27;...core&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(relative_import(&#x27;fastai.vision.transform&#x27;, _p/&#x27;vision&#x27;), &#x27;.transform&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(relative_import(&#x27;fastai.notebook.core&#x27;, _p/&#x27;data&#x27;), &#x27;..notebook.core&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(relative_import(&#x27;fastai.vision&#x27;, _p/&#x27;vision&#x27;), &#x27;.&#x27;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def update_import(source, tree, libname, f=relative_import):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if not tree: return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    imps = L(tree).filter(risinstance(ast.ImportFrom))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if not imps: return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    src = source.splitlines(True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for imp in imps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nmod = f(imp.module, libname, imp.level)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lin = imp.lineno-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sec = src[lin][imp.col_offset:imp.end_col_offset]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        newsec = re.sub(f&quot;(from +){&#x27;.&#x27;*imp.level}{imp.module}&quot;, fr&quot;\1{nmod}&quot;, sec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        src[lin] = src[lin].replace(sec,newsec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def import2relative(cell:NbCell, libname):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    src = update_import(cell.source, cell.parsed_(), libname)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if src: cell.set_source(src)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">ss = &quot;from nbprocess.export import *\nfrom nbprocess.a.b import *&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cell = make_code_cells([ss])[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cell.import2relative(&#x27;nbprocess&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(cell.source, &#x27;from .export import *\nfrom .a.b import *&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cell = make_code_cells([ss])[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cell.import2relative(&#x27;nbprocess/a&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_eq(cell.source, &#x27;from ..export import *\nfrom .b import *&#x27;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def make(self:ModuleMaker, cells, all_cells=None, lib_name=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Write module containing `cells` with `__all__` generated from `all_cells`&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if lib_name is None: lib_name = get_config().lib_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if all_cells is None: all_cells = cells</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for cell in all_cells: cell.import2relative(lib_name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if not self.is_new: return self._make_exists(cells, all_cells)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.fname.parent.mkdir(exist_ok=True, parents=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _all = self.make_all(all_cells)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trees = cells.map(NbCell.parsed_)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try: last_future = max(i for i,tree in enumerate(trees) if tree and any(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         isinstance(t,ast.ImportFrom) and t.module==&#x27;__future__&#x27; for t in tree))+1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except ValueError: last_future=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    with self.fname.open(&#x27;w&#x27;) as f:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        f.write(f&quot;# AUTOGENERATED! DO NOT EDIT! File to edit: {self.dest2nb}.&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        write_cells(cells[:last_future], self.hdr, f, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tw = TextWrapper(width=120, initial_indent=&#x27;&#x27;, subsequent_indent=&#x27; &#x27;*11, break_long_words=False)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        all_str = &#x27;\n&#x27;.join(tw.wrap(str(_all)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        f.write(f&quot;\n\n# %% auto 0\n__all__ = {all_str}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        write_cells(cells[last_future:], self.hdr, f, 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        f.write(&#x27;\n&#x27;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">def _print_file(fname, mx=None): print(Path(fname).read_text().strip()[:ifnone(mx,9999)])</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">cells = make_code_cells(&quot;from __future__ import print_function&quot;, &quot;#export\ndef a(): ...&quot;, &quot;def b(): ...&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mm.make(cells, L([cells[1]]))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(Path(&#x27;tmp/test/testing.py&#x27;).read_text())</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="wrapper_Kbar"><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain"># AUTOGENERATED! DO NOT EDIT! File to edit: ../01_export.ipynb.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># %% ../01_export.ipynb 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from __future__ import print_function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># %% auto 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">__all__ = [&#x27;a&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># %% ../01_export.ipynb 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def a(): ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># %% ../01_export.ipynb 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def b(): ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div> </div><p>Pass <code>all_cells=[]</code> if you don&#x27;t want any <code>__all__</code> added.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def _update_all(self:ModuleMaker, all_cells, alls):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return pformat(alls + self.make_all(all_cells), width=160)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def _make_exists(self:ModuleMaker, cells, all_cells=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;`make` for `is_new=False`&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if all_cells: update_var(&#x27;__all__&#x27;, partial(self._update_all, all_cells), fn=self.fname)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    with self.fname.open(&#x27;a&#x27;) as f: write_cells(cells, self.hdr, f)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>If <code>is_new=False</code> then the additional definitions are added to the bottom, and any existing <code>__all__</code> is updated with the newly-added symbols.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">c2 = make_code_cells(&quot;def c(): ...&quot;, &quot;def d(): ...&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mm = ModuleMaker(dest=&#x27;tmp&#x27;, name=&#x27;test.testing&#x27;, nb_path=Path.cwd()/&#x27;01_export.ipynb&#x27;, is_new=False)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mm.make(c2, c2)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">g = exec_new(&#x27;from tmp.test.testing import *&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for s in &quot;a c d&quot;.split(): assert s in g, s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assert &#x27;b&#x27; not in g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assert g[&#x27;a&#x27;]() is None</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="export--">Export -<a class="hash-link" href="#export--" title="Direct link to heading">‚Äã</a></h2><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">path = Path(&#x27;../nbprocess&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(path/&#x27;read.py&#x27;).unlink(missing_ok=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(path/&#x27;maker.py&#x27;).unlink(missing_ok=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_init(path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cfg = get_config()</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def basic_export_nb2(fname, name, dest=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;A basic exporter to bootstrap nbprocess using `ModuleMaker`&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if dest is None: dest = get_config().path(&#x27;lib_path&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cells = L(c for c in read_nb(fname).cells if re.match(r&#x27;#\s*export&#x27;, c.source))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ModuleMaker(dest=dest, name=name, nb_path=fname).make(cells)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">basic_export_nb2(&#x27;00_read.ipynb&#x27;, &#x27;read&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">basic_export_nb2(&#x27;01_maker.ipynb&#x27;, &#x27;maker&#x27;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">g = exec_new(&#x27;from nbprocess import maker&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assert g[&#x27;maker&#x27;].ModuleMaker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assert &#x27;ModuleMaker&#x27; in g[&#x27;maker&#x27;].__all__</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/fastai/nbprocess/tree/main/packages/create-docusaurus/templates/shared/docs/01_maker.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/read"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">read</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/export"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">export</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#variable-helpers" class="table-of-contents__link toc-highlight">Variable helpers</a></li><li><a href="#modulemaker--" class="table-of-contents__link toc-highlight">ModuleMaker -</a></li><li><a href="#export--" class="table-of-contents__link toc-highlight">Export -</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 fastai, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c8a224fb.js"></script>
<script src="/assets/js/main.61181c7e.js"></script>
</body>
</html>