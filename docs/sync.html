---

title: Synchronize and diff


keywords: fastai
sidebar: home_sidebar

summary: "Propagating small changes in the library back to notebooks"
description: "Propagating small changes in the library back to notebooks"
nb_path: "nbs/03_sync.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/03_sync.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The library is primarily developed in notebooks so any big changes should be made there. But sometimes, it's easier to fix small bugs or typos in the modules directly. <code>nbprocess_update_lib</code> is the function that will propagate those changes back to the corresponding notebooks. Note that you can't create new cells or reorder cells with that functionality, so your corrections should remain limited.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="nb2dict" class="doc_header"><code>nb2dict</code><a href="https://github.com/fastai/nbprocess/tree/master/nbprocess/sync.py#L17" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>nb2dict</code>(<strong><code>d</code></strong>, <strong><code>k</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Convert parsed notebook to <code>dict</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This returns the exact same dict as is read from the notebook JSON.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">minimal_fn</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;../tests/minimal.ipynb&#39;</span><span class="p">)</span>
<span class="n">minimal</span> <span class="o">=</span> <span class="n">read_nb</span><span class="p">(</span><span class="n">minimal_fn</span><span class="p">)</span>

<span class="n">minimal_dict</span> <span class="o">=</span> <span class="n">minimal_fn</span><span class="o">.</span><span class="n">read_json</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">minimal_dict</span><span class="o">==</span><span class="n">nb2dict</span><span class="p">(</span><span class="n">minimal</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="write_nb" class="doc_header"><code>write_nb</code><a href="https://github.com/fastai/nbprocess/tree/master/nbprocess/sync.py#L25" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>write_nb</code>(<strong><code>nb</code></strong>, <strong><code>path</code></strong>)</p>
</blockquote>
<p>Write <code>nb</code> to <code>path</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This returns the exact same string as saved by Jupyter.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tmp</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;tmp.ipynb&#39;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">minimal_txt</span> <span class="o">=</span> <span class="n">minimal_fn</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
    <span class="n">write_nb</span><span class="p">(</span><span class="n">minimal</span><span class="p">,</span> <span class="n">tmp</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">minimal_txt</span><span class="o">==</span><span class="n">tmp</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span> <span class="n">tmp</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="absolute_import" class="doc_header"><code>absolute_import</code><a href="https://github.com/fastai/nbprocess/tree/master/nbprocess/sync.py#L33" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>absolute_import</code>(<strong><code>name</code></strong>, <strong><code>fname</code></strong>, <strong><code>level</code></strong>)</p>
</blockquote>
<p>Unwarps a relative import in <code>name</code> according to <code>fname</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">absolute_import</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">,</span> <span class="s1">&#39;nbprocess&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">&#39;xyz&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">absolute_import</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;nbprocess&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;nbprocess&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">absolute_import</span><span class="p">(</span><span class="s1">&#39;core&#39;</span><span class="p">,</span> <span class="s1">&#39;nbprocess&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;nbprocess.core&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">absolute_import</span><span class="p">(</span><span class="s1">&#39;core&#39;</span><span class="p">,</span> <span class="s1">&#39;nbprocess/vision&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;nbprocess.core&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">absolute_import</span><span class="p">(</span><span class="s1">&#39;transform&#39;</span><span class="p">,</span> <span class="s1">&#39;nbprocess/vision&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;nbprocess.vision.transform&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">absolute_import</span><span class="p">(</span><span class="s1">&#39;notebook.core&#39;</span><span class="p">,</span> <span class="s1">&#39;nbprocess/data&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;nbprocess.notebook.core&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="update_lib" class="doc_header"><code>update_lib</code><a href="https://github.com/fastai/nbprocess/tree/master/nbprocess/sync.py#L67" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>update_lib</code>(<strong><code>fname</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Propagates any change in the modules matching <code>fname</code> to the notebooks that created them</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbprocess.export</span> <span class="kn">import</span> <span class="n">nbs_export</span>
<span class="n">nbs_export</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

