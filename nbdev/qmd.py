# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/api/qmd.ipynb.

# %% ../nbs/api/qmd.ipynb 2
from __future__ import annotations
import sys,os,inspect

from fastcore.utils import *
from fastcore.meta import delegates

# %% auto 0
__all__ = ['meta', 'div', 'img', 'btn', 'tblrow', 'tblhdr']

# %% ../nbs/api/qmd.ipynb 4
def meta(md,  # Markdown to add meta to
         classes=None,  # List of CSS classes to add
         style=None,  # Dict of CSS styles to add
         **kwargs):   # Additional attributes to add to meta
    "A metadata section for qmd div in `{}`"
    if style: kwargs['style'] = "; ".join(f'{k}: {v}' for k,v in style.items())
    props = ' '.join(f'{k}="{v}"' for k,v in kwargs.items())
    classes = ' '.join('.'+c for c in L(classes))
    meta = []
    if classes: meta.append(classes)
    if props: meta.append(props)
    meta = ' '.join(meta)
    return md + ("{" + meta + "}" if meta else "")

# %% ../nbs/api/qmd.ipynb 5
def div(txt,  # Markdown to add meta to
        classes=None,  # List of CSS classes to add
        style=None,  # Dict of CSS styles to add
        **kwargs):
    "A qmd div with optional metadata section"
    return meta("::: ", classes=classes, style=style, **kwargs) + f"\n\n{txt}\n\n:::\n\n"

# %% ../nbs/api/qmd.ipynb 6
def img(fname,  # Image to link to
        classes=None,  # List of CSS classes to add
        style=None,   # Dict of CSS styles to add
        height=None,  # Height attribute
        relative=None,  # Tuple of (position,px)
        link=False,   # Hyperlink to this image
        **kwargs):
    "A qmd image"
    kwargs,style = kwargs or {}, style or {}
    if height: kwargs["height"]= f"{height}px"
    if relative:
        pos,px = relative
        style["position"] = "relative"
        style[pos] = f"{px}px"
    res = meta(f'![]({fname})', classes=classes, style=style, **kwargs)
    return  f'[{res}]({fname})' if link else res

# %% ../nbs/api/qmd.ipynb 7
def btn(txt, # Button text
        link,  # Button link URL
        classes=None,  # List of CSS classes to add
        style=None,    # Dict of CSS styles to add
        **kwargs):
    "A qmd button"
    return meta(f'[{txt}]({link})', classes=classes, style=style, role="button")

# %% ../nbs/api/qmd.ipynb 8
def tblrow(cols):
    "Create a table row from `cols`"
    return '|' + '|'.join(str(c or '') for c in cols) + '|\n'

# %% ../nbs/api/qmd.ipynb 9
def tblhdr(titles, sizes=None):
    "Create a table header with `titles` and relative size `sizes`"
    if sizes is None: sizes = [3]*len(titles)
    return tblrow(titles)+tblrow('-'*s for s in sizes)
